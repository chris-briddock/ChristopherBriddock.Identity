trigger:
- none

pool: 
  name: Docker

resources:
  pipelines:
  - pipeline: previous-pipeline-trigger   # Name of the pipeline resource
    source: ChristopherBriddock.Service.Identity-CI # Name of the pipeline referenced by the pipeline resource
    trigger: true # enable the trigger

jobs:
- job: Build
  displayName: 'Build'
  steps:
  - checkout: self
  - task: DockerInstaller@0
    inputs:
      dockerVersion: '17.09.0-ce'
  - task: Docker@2
    inputs:
      containerRegistry: 'docker'
      command: 'login'
  - task: Docker@2
    inputs:
      containerRegistry: 'docker'
      repository: 'immerslve/service.identity'
      command: 'buildAndPush'
      Dockerfile: 'src/ChristopherBriddock.Service.Identity/Dockerfile'